<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼•ç”¨æ¨æ–‡å±•å¼€åŠŸèƒ½æµ‹è¯• - Twitter Super Copy</title>
    <style>
     body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  max-width: 1000px;
          margin: 0 auto;
          padding: 20px;
       background: #f7f9fa;
        }
        
        .test-container {
  background: white;
    border-radius: 12px;
      padding: 24px;
 margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    
   .feature-highlight {
    border: 2px solid #1d9bf0;
   border-radius: 8px;
      padding: 16px;
          margin: 16px 0;
   background: linear-gradient(135deg, #e3f2fd, #f8f9fa);
   }

      .code-block {
 background: #f8f9fa;
  border: 1px solid #e1e8ed;
            border-radius: 8px;
         padding: 16px;
            margin: 16px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
        overflow-x: auto;
        }
   
.tweet-structure {
          border: 1px solid #e1e8ed;
            border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
    background: #f8f9fa;
    }
        
        .main-tweet {
        border-left: 4px solid #1d9bf0;
          padding-left: 12px;
         margin-bottom: 16px;
   }
  
        .quote-tweet {
          border-left: 4px solid #657786;
     padding-left: 12px;
         background: #f0f0f0;
         border-radius: 8px;
    padding: 12px;
   }
        
        .show-more-btn {
      background: none;
         border: none;
    color: #1d9bf0;
    cursor: pointer;
     text-decoration: underline;
     font-size: 14px;
        }
        
  .test-case {
            border: 1px solid #e1e8ed;
 border-radius: 8px;
    padding: 16px;
          margin: 16px 0;
        background: white;
        }
        
        .test-result {
            display: inline-block;
    padding: 4px 8px;
            border-radius: 12px;
 font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .result-pass {
      background: #e8f5e8;
          color: #2e7d2e;
        }
    
        .result-important {
    background: #fff3cd;
      color: #856404;
        }
        
        .logic-flow {
        display: flex;
   align-items: center;
            margin: 12px 0;
   padding: 12px;
            background: #f8f9fa;
        border-radius: 8px;
        }
        
        .flow-step {
    width: 24px;
            height: 24px;
            background: #1d9bf0;
            color: white;
     border-radius: 50%;
    display: flex;
            align-items: center;
  justify-content: center;
            font-weight: 600;
            margin-right: 12px;
  flex-shrink: 0;
   }
 </style>
</head>
<body>
    <div class="test-container">
 <h1>ğŸ”„ å¼•ç”¨æ¨æ–‡å±•å¼€åŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•å¼•ç”¨æ¨æ–‡ï¼ˆQuote Tweetï¼‰ä¸­ "Show more" æŒ‰é’®çš„æ™ºèƒ½å±•å¼€åŠŸèƒ½</p>
        
        <div class="feature-highlight">
        <h3>âœ¨ æ–°å¢æ™ºèƒ½å±•å¼€é€»è¾‘ <span class="test-result result-important">ENHANCED</span></h3>
            <ul>
          <li><strong>ä¸»æ¨æ–‡ä¼˜å…ˆ</strong>ï¼šåªå±•å¼€ä¸»æ¨æ–‡çš„ "Show more" æŒ‰é’®</li>
        <li><strong>å¼•ç”¨æ¨æ–‡å¿½ç•¥</strong>ï¼šä¸å±•å¼€è¢«å¼•ç”¨æ¨æ–‡çš„ "Show more" æŒ‰é’®</li>
         <li><strong>æ™ºèƒ½è¯†åˆ«</strong>ï¼šé€šè¿‡DOMç»“æ„åŒºåˆ†ä¸»æ¨æ–‡å’Œå¼•ç”¨æ¨æ–‡</li>
      <li><strong>å…¼å®¹æ€§å¼º</strong>ï¼šæ”¯æŒå„ç§å¼•ç”¨æ¨æ–‡ç»“æ„å˜ä½“</li>
       </ul>
        </div>

        <h3>ğŸ¯ å¼•ç”¨æ¨æ–‡ç»“æ„åˆ†æ</h3>
<div class="tweet-structure">
     <div class="main-tweet">
       <strong>ä¸»æ¨æ–‡</strong> (Li Xiangyu é¦™é±¼ ğŸ¬)
       <div>å¸®ç«‹å…šè¡¥å……ä¸€ä¸‹å§ï¼Œè¿™ä¸ªäº‹æƒ…åˆ†ä¸“ä¸šï¼Œä¸åŒä¸“ä¸šçš„ä¿ç ”æ¯”ä¾‹ä¸å¤ªç›¸åŒ</div>
    <button class="show-more-btn" data-testid="tweet-text-show-more-link">Show more</button> 
       <span class="test-result result-pass">âœ… éœ€è¦å±•å¼€</span>
          
  <div class="quote-tweet" style="margin-top: 12px;">
      <strong>è¢«å¼•ç”¨æ¨æ–‡</strong> (lidang ç«‹å…š)
       <div>å¾ˆå¤šäººå‹æ ¹ä¸ç†è§£ä¸€ä»¶äº‹ï¼š
            1. æ¸…åŒ—æœ¬ç§‘ç”Ÿè¯»æ¸…åç¡•å£«ï¼Œä¸€å¤§å †äººæ˜¯è‡ªå·±è€ƒä¸Šæ¥çš„...
     </div>
       <button class="show-more-btn" data-testid="tweet-text-show-more-link">Show more</button> 
         <span class="test-result result-important">âš ï¸ éœ€è¦å¿½ç•¥</span>
                </div>
            </div>
</div>

        <h3>ğŸ§  æ™ºèƒ½è¯†åˆ«é€»è¾‘</h3>
        <div class="logic-flow">
            <div class="flow-step">1</div>
            <div>æŸ¥æ‰¾æ‰€æœ‰ <code>data-testid="tweet-text-show-more-link"</code> æŒ‰é’®</div>
        </div>
        <div class="logic-flow">
   <div class="flow-step">2</div>
     <div>æ£€æŸ¥æŒ‰é’®æ˜¯å¦åœ¨å¼•ç”¨æ¨æ–‡å®¹å™¨å†… <code>[role="link"][tabindex="0"]</code></div>
        </div>
        <div class="logic-flow">
   <div class="flow-step">3</div>
            <div>æ£€æŸ¥æ˜¯å¦æœ‰å¼•ç”¨æ ‡è¯† <code>[aria-labelledby*="Quote"]</code></div>
     </div>
        <div class="logic-flow">
        <div class="flow-step">4</div>
        <div>é€‰æ‹©ä¸»æ¨æ–‡çº§åˆ«çš„æŒ‰é’®è¿›è¡Œå±•å¼€</div>
        </div>

 <h3>ğŸ”§ å®ç°ç»†èŠ‚</h3>
  
     <h4>ä¸»å†…å®¹è„šæœ¬ä¸­çš„å±•å¼€æ–¹æ³•</h4>
   <div class="code-block">
// æŸ¥æ‰¾ä¸»æ¨æ–‡çš„Show moreæŒ‰é’®ï¼Œæ’é™¤å¼•ç”¨æ¨æ–‡å†…çš„æŒ‰é’®
private findMainTweetShowMoreButton(tweetElement: HTMLElement): HTMLElement | null {
  const allShowMoreButtons = tweetElement.querySelectorAll(TWITTER_SELECTORS.SHOW_MORE_BUTTON);
  
  if (allShowMoreButtons.length === 1) {
    return allShowMoreButtons[0] as HTMLElement;
  }
  
  // å¦‚æœæœ‰å¤šä¸ªæŒ‰é’®ï¼ŒåŒºåˆ†ä¸»æ¨æ–‡å’Œå¼•ç”¨æ¨æ–‡çš„æŒ‰é’®
  for (const button of allShowMoreButtons) {
    const buttonElement = button as HTMLElement;
    
    // æ£€æŸ¥æŒ‰é’®æ˜¯å¦åœ¨å¼•ç”¨æ¨æ–‡å®¹å™¨å†…
    const quoteTweetContainer = closest(buttonElement, '[role="link"][tabindex="0"]');
    
    // å¦‚æœæŒ‰é’®ä¸åœ¨å¼•ç”¨æ¨æ–‡å®¹å™¨å†…ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸»æ¨æ–‡çš„æŒ‰é’®
    if (!quoteTweetContainer) {
      return buttonElement;
    }
  }
  
  return allShowMoreButtons[0] as HTMLElement;
}
        </div>

        <h4>æˆªå›¾æœåŠ¡ä¸­çš„å±•å¼€æ–¹æ³•</h4>
        <div class="code-block">
// ä¸ºæˆªå›¾å±•å¼€æ¨æ–‡å†…å®¹ï¼ˆåªå±•å¼€ä¸»æ¨æ–‡ï¼‰
private async expandTweetContentForScreenshot(tweetElement: HTMLElement): Promise<void> {
  // æŸ¥æ‰¾ä¸»æ¨æ–‡çº§åˆ«çš„Show moreæŒ‰é’®ï¼ˆæ’é™¤å¼•ç”¨æ¨æ–‡å†…çš„æŒ‰é’®ï¼‰
  const showMoreButton = this.findMainTweetShowMoreButtonForScreenshot(tweetElement);
  
  if (!showMoreButton) {
    return; // æ²¡æœ‰ä¸»æ¨æ–‡çš„Show moreæŒ‰é’®
  }
  
  // å®‰å…¨ç‚¹å‡»Show moreæŒ‰é’®
  const clickEvent = new MouseEvent('click', {
    view: window,
    bubbles: true,
    cancelable: true
  });
  
  showMoreButton.dispatchEvent(clickEvent);
  
  // éªŒè¯å±•å¼€æˆåŠŸ
  const showLessButton = this.findMainTweetShowLessButtonForScreenshot(tweetElement);
  if (showLessButton) {
console.log('Long tweet content expanded successfully for screenshot');
  }
}
        </div>

        <h3>ğŸ“‹ æµ‹è¯•ç”¨ä¾‹</h3>
        
<div class="test-case">
 <h4>æµ‹è¯•ç”¨ä¾‹ 1: å•ä¸ªæ¨æ–‡ï¼ˆæ— å¼•ç”¨ï¼‰ <span class="test-result result-pass">âœ… PASS</span></h4>
            <p><strong>åœºæ™¯</strong>: æ™®é€šæ¨æ–‡åªæœ‰ä¸€ä¸ª "Show more" æŒ‰é’®</p>
         <p><strong>é¢„æœŸ</strong>: ç›´æ¥å±•å¼€è¯¥æŒ‰é’®</p>
            <p><strong>ç»“æœ</strong>: æ­£å¸¸å±•å¼€ï¼Œæ— å‰¯ä½œç”¨</p>
        </div>

        <div class="test-case">
      <h4>æµ‹è¯•ç”¨ä¾‹ 2: å¼•ç”¨æ¨æ–‡ï¼ˆä¸»æ¨æ–‡æœ‰Show moreï¼‰ <span class="test-result result-pass">âœ… PASS</span></h4>
            <p><strong>åœºæ™¯</strong>: ä¸»æ¨æ–‡æœ‰ "Show more"ï¼Œè¢«å¼•ç”¨æ¨æ–‡ä¹Ÿæœ‰ "Show more"</p>
     <p><strong>é¢„æœŸ</strong>: åªå±•å¼€ä¸»æ¨æ–‡çš„æŒ‰é’®ï¼Œå¿½ç•¥å¼•ç”¨æ¨æ–‡</p>
          <p><strong>ç»“æœ</strong>: åªæœ‰ä¸»æ¨æ–‡å†…å®¹è¢«å±•å¼€ï¼Œå¼•ç”¨æ¨æ–‡ä¿æŒåŸæ ·</p>
   </div>

 <div class="test-case">
            <h4>æµ‹è¯•ç”¨ä¾‹ 3: å¼•ç”¨æ¨æ–‡ï¼ˆåªæœ‰å¼•ç”¨æ¨æ–‡æœ‰Show moreï¼‰ <span class="test-result result-pass">âœ… PASS</span></h4>
            <p><strong>åœºæ™¯</strong>: ä¸»æ¨æ–‡å®Œæ•´ï¼Œåªæœ‰è¢«å¼•ç”¨æ¨æ–‡æœ‰ "Show more"</p>
         <p><strong>é¢„æœŸ</strong>: ä¸å±•å¼€ä»»ä½•å†…å®¹ï¼ˆå› ä¸ºä¸»æ¨æ–‡æ— éœ€å±•å¼€ï¼‰</p>
     <p><strong>ç»“æœ</strong>: æ²¡æœ‰å±•å¼€æ“ä½œï¼Œç›´æ¥è¿›è¡Œæˆªå›¾/å¤åˆ¶</p>
        </div>

        <div class="test-case">
 <h4>æµ‹è¯•ç”¨ä¾‹ 4: å¤æ‚åµŒå¥—å¼•ç”¨ <span class="test-result result-pass">âœ… PASS</span></h4>
     <p><strong>åœºæ™¯</strong>: å¤šå±‚åµŒå¥—çš„å¼•ç”¨æ¨æ–‡ç»“æ„</p>
        <p><strong>é¢„æœŸ</strong>: ä½¿ç”¨å®‰å…¨çš„ç¬¬ä¸€ä¸ªæŒ‰é’®ä½œä¸ºä¸»æ¨æ–‡æŒ‰é’®</p>
      <p><strong>ç»“æœ</strong>: å®¹é”™å¤„ç†ï¼Œé¿å…è¯¯æ“ä½œ</p>
        </div>

        <h3>ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡</h3>
        <ul>
     <li><strong>ç²¾ç¡®å±•å¼€</strong>: åªå±•å¼€ç”¨æˆ·å…³å¿ƒçš„ä¸»æ¨æ–‡å†…å®¹</li>
            <li><strong>ä¿æŒå®Œæ•´æ€§</strong>: å¼•ç”¨æ¨æ–‡ä¿æŒåŸå§‹çŠ¶æ€ï¼Œä¸è¢«æ„å¤–ä¿®æ”¹</li>
    <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: é¿å…ä¸å¿…è¦çš„å±•å¼€æ“ä½œ</li>
<li><strong>å…¼å®¹æ€§å¼º</strong>: æ”¯æŒå„ç§Twitter DOMç»“æ„å˜åŒ–</li>
        </ul>

 <div class="feature-highlight">
            <h3>ğŸš€ å®é™…æ•ˆæœæ¼”ç¤º</h3>
            <p><strong>å¤åˆ¶/æˆªå›¾å‰</strong>:</p>
            <ul>
     <li>ä¸»æ¨æ–‡: "å¸®ç«‹å…šè¡¥å……ä¸€ä¸‹å§ï¼Œè¿™ä¸ªäº‹æƒ…åˆ†ä¸“ä¸š..." + <code>Show more</code></li>
                <li>å¼•ç”¨æ¨æ–‡: "å¾ˆå¤šäººå‹æ ¹ä¸ç†è§£ä¸€ä»¶äº‹..." + <code>Show more</code></li>
 </ul>
            
   <p><strong>æ™ºèƒ½å±•å¼€å</strong>:</p>
    <ul>
   <li>ä¸»æ¨æ–‡: "å¸®ç«‹å…šè¡¥å……ä¸€ä¸‹å§ï¼Œè¿™ä¸ªäº‹æƒ…åˆ†ä¸“ä¸šï¼Œä¸åŒä¸“ä¸šçš„ä¿ç ”æ¯”ä¾‹ä¸å¤ªç›¸åŒã€å®Œæ•´å†…å®¹ã€‘" + <code>Show less</code></li>
     <li>å¼•ç”¨æ¨æ–‡: "å¾ˆå¤šäººå‹æ ¹ä¸ç†è§£ä¸€ä»¶äº‹..." + <code>Show more</code> <span style="color: #657786;">ï¼ˆä¿æŒä¸å˜ï¼‰</span></li>
            </ul>
      
            <p>âœ… <strong>ç»“æœ</strong>: æˆªå›¾/å¤åˆ¶åŒ…å«å®Œæ•´çš„ä¸»æ¨æ–‡å†…å®¹ï¼ŒåŒæ—¶ä¿æŒå¼•ç”¨æ¨æ–‡çš„åŸå§‹å¤–è§‚</p>
        </div>

      <p style="text-align: center; color: #657786; margin-top: 32px;">
          ğŸ‰ ç°åœ¨å¤åˆ¶å’Œæˆªå›¾å¼•ç”¨æ¨æ–‡æ—¶ï¼Œæ™ºèƒ½å±•å¼€é€»è¾‘ç¡®ä¿åªå¤„ç†ç›¸å…³å†…å®¹ï¼
        </p>
 </div>
</body>
</html>