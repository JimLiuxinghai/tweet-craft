# 推文线程复制功能测试指南

## 🎯 测试目标
验证新开发的推文线程智能检测和复制功能是否正常工作。

## 📋 测试准备

### 1. 安装/更新插件
- 确保已加载最新版本的插件
- 检查控制台是否有加载错误
- 确认插件图标显示正常

### 2. 访问测试页面
建议在以下页面进行测试：
- Twitter.com 主页时间线
- 具有推文线程的用户个人页面
- 搜索结果页面

## 🧪 测试场景

### 场景1：基本线程检测
1. **查找线程推文**
   - 寻找包含"1/n"、"2/n"模式的推文
   - 寻找以数字开头的连续推文
   - 寻找使用🧵表情符号的推文

2. **验证线程指示器**
   - 线程推文右上角应显示🧵徽章
   - 徽章显示正确的位置信息（如"1/5"）
   - 复制按钮应显示特殊的线程图标

### 场景2：线程复制交互
1. **点击线程推文的复制按钮**
   - 应弹出选择对话框
   - 对话框显示线程位置信息
   - 提供三个选项：复制整个线程、只复制这条、取消

2. **选择"复制整个线程"**
   - 按钮显示特殊的成功动画
   - 通知显示复制的推文数量
   - 剪贴板包含完整的格式化线程

3. **选择"只复制这条"**
   - 按钮显示普通的成功动画
   - 剪贴板只包含当前推文

### 场景3：格式化验证
复制线程后，粘贴到以下编辑器验证格式：

#### HTML格式测试
- 粘贴到富文本编辑器（如Google文档）
- 验证样式保留（粗体、链接、结构）
- 检查线程标题和编号

#### Markdown格式测试
- 粘贴到Markdown编辑器（如Typora）
- 验证标题、分隔符、链接格式
- 检查线程统计信息

#### 纯文本格式测试
- 粘贴到记事本
- 验证内容完整性
- 检查线程编号和分隔符

### 场景4：边界情况测试
1. **单条推文**
   - 普通推文不应显示线程指示器
   - 复制按钮使用普通图标

2. **错误检测**
   - 不相关推文不应被识别为线程
   - 处理页面加载过程中的DOM变化

3. **性能测试**
   - 在长线程页面测试响应速度
   - 验证大量推文时的内存使用

## ✅ 验收标准

### 线程检测
- [ ] 正确识别数字编号线程（1/n格式）
- [ ] 正确识别自回复线程
- [ ] 正确识别连续性指示器（...、thread等）
- [ ] 线程指示器显示正确
- [ ] 线程按钮样式正确

### 用户交互
- [ ] 线程选择对话框正常显示
- [ ] 对话框信息准确
- [ ] 按钮响应正常
- [ ] 视觉反馈清晰

### 复制功能
- [ ] 整个线程复制完整
- [ ] 单条推文复制正确
- [ ] 格式化输出正确
- [ ] 所有格式（HTML/Markdown/Text）正常

### 性能和稳定性
- [ ] 无控制台错误
- [ ] 页面滚动时正常工作
- [ ] 新推文加载时正常处理
- [ ] 内存使用合理

## 🐛 常见问题排查

### 线程未被识别
- 检查推文内容是否包含数字模式
- 验证DOM结构是否符合预期
- 查看控制台是否有解析错误

### 对话框不显示
- 检查页面是否完全加载
- 验证modal样式是否正确应用
- 确认事件监听器正常绑定

### 复制失败
- 检查剪贴板权限
- 验证内容格式化过程
- 查看错误日志

### 性能问题
- 检查是否有内存泄漏
- 验证事件监听器清理
- 监控DOM操作频率

## 📝 测试报告模板

```markdown
## 测试日期: [日期]
## 测试环境: [Chrome版本] / [操作系统]
## 测试页面: [Twitter URL]

### 功能测试结果
- [ ] 线程检测: 通过/失败
- [ ] 用户交互: 通过/失败  
- [ ] 复制功能: 通过/失败
- [ ] 格式化: 通过/失败

### 发现的问题
1. [问题描述]
2. [问题描述]

### 建议改进
1. [改进建议]
2. [改进建议]
```

## 🚀 下一步

测试通过后，可以考虑：
1. 添加更多线程检测模式
2. 优化用户体验细节
3. 准备发布版本
4. 编写用户使用指南 