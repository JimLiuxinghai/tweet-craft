# 国际化功能测试指南

## 🌍 测试目标

验证Twitter超级复制插件的国际化（i18n）功能是否正常工作，确保多语言支持的完整性和用户体验。

## 📋 测试准备

### 1. 支持的语言列表
- 🇺🇸 英语 (English)
- 🇨🇳 简体中文 (简体中文)
- 🇯🇵 日语 (日本語) 
- 🇰🇷 韩语 (한국어)
- 🇪🇸 西班牙语 (Español)
- 🇫🇷 法语 (Français)

### 2. 测试环境设置
- 安装最新版插件
- 清空浏览器缓存和localStorage
- 准备不同语言的推文内容

## 🧪 测试场景

### 测试1: 自动语言检测
**目标**: 验证插件能根据浏览器语言自动选择界面语言

1. **设置浏览器语言为英语**
   - 打开Chrome设置 > 高级 > 语言
   - 将英语设为首选语言
   - 重启浏览器

2. **验证自动检测**
   - 打开Twitter页面
   - 点击插件图标打开弹窗
   - 验证界面显示为英语
   - 检查复制按钮显示为"Copy Tweet"

3. **验证复制功能**
   - 点击推文的复制按钮
   - 验证成功提示为"Copied successfully!"
   - 验证线程检测提示为"🧵 Thread Detected"

**预期结果**: ✅ 界面完全显示为英语

### 测试2: 手动语言切换
**目标**: 验证用户可以手动切换界面语言

1. **切换到日语**
   - 打开插件弹窗
   - 在语言下拉菜单中选择"日本語"
   - 验证界面立即更新为日语

2. **功能验证**
   - 复制按钮显示为"ツイートをコピー"
   - 设置标题显示为"設定"
   - 复制格式显示为"HTML形式", "Markdown形式", "プレーンテキスト"

3. **线程功能验证**
   - 找到一个推文线程
   - 点击复制按钮
   - 验证对话框标题为"🧵 スレッドを検出"
   - 按钮显示为"スレッド全体をコピー", "このツイートのみコピー", "キャンセル"

**预期结果**: ✅ 界面完全显示为日语，功能正常

### 测试3: 语言持久化
**目标**: 验证语言选择会被保存并在下次使用时生效

1. **设置语言**
   - 选择韩语 (한국어)
   - 关闭弹窗
   - 刷新页面

2. **验证持久化**
   - 重新打开插件弹窗
   - 验证界面仍为韩语
   - 验证语言选择器显示"한국어"为选中状态

**预期结果**: ✅ 语言设置被正确保存和恢复

### 测试4: 线程复制国际化
**目标**: 验证推文线程复制功能的多语言支持

1. **准备线程推文**
   - 找到一个多条推文的线程
   - 确保插件检测到线程（显示🧵图标）

2. **验证不同语言下的线程复制**
   
   **简体中文**:
   - 设置语言为"简体中文"
   - 点击线程推文的复制按钮
   - 验证对话框标题: "🧵 检测到推文线程"
   - 验证按钮: "复制整个线程", "只复制这条", "取消"
   - 选择"复制整个线程"
   - 验证成功提示: "✅ 已复制 X 条推文线程！"

   **西班牙语**:
   - 切换语言为"Español"
   - 重复上述操作
   - 验证对话框标题: "🧵 Hilo Detectado"
   - 验证按钮: "Copiar Todo el Hilo", "Copiar Solo Este", "Cancelar"
   - 验证成功提示: "✅ ¡Copiado hilo de X tweets!"

**预期结果**: ✅ 线程复制在各语言下正常工作

### 测试5: 错误消息国际化
**目标**: 验证错误提示信息的多语言显示

1. **权限错误测试**
   - 在浏览器中禁用剪贴板权限
   - 尝试复制推文
   - 在不同语言下验证错误提示:
     - 英语: "Copy function unavailable, please check browser permissions"
     - 中文: "复制功能暂时不可用，请检查浏览器权限设置"
     - 日语: "コピー機能が利用できません。ブラウザの権限設定を確认してください"

2. **帮助信息测试**
   - 点击错误提示中的"了解更多"按钮
   - 验证帮助信息以正确语言显示

**预期结果**: ✅ 错误消息正确本地化

### 测试6: 复制内容格式化国际化
**目标**: 验证复制的内容包含正确的国际化元素

1. **线程总结测试**
   - 复制一个包含5条推文的线程
   - 验证复制内容包含本地化的总结信息:
     - 英语: "📊 Thread Summary: 5 tweets"
     - 中文: "📊 线程总结: 5 条推文"
     - 韩语: "📊 스레드 요약: 5개 트윗"

2. **时间戳格式化测试**
   - 验证不同语言环境下时间格式的正确显示
   - 中文可能显示为 "2024年01月15日"
   - 英语显示为 "01/15/2024"

**预期结果**: ✅ 复制内容包含正确的本地化信息

### 测试7: 浏览器语言变更响应
**目标**: 验证浏览器语言变更时插件的响应

1. **运行时语言变更**
   - 插件设为"自动检测"模式
   - 在浏览器运行时更改系统语言
   - 刷新页面
   - 验证插件是否检测到新语言

2. **回退机制测试**
   - 设置浏览器语言为不支持的语言（如阿拉伯语）
   - 验证插件回退到英语
   - 确认功能正常

**预期结果**: ✅ 正确响应语言变更并有适当回退

## ✅ 验收标准

### 功能完整性
- [ ] 所有6种支持语言的界面完全翻译
- [ ] 自动语言检测正常工作
- [ ] 手动语言切换立即生效
- [ ] 语言选择正确保存和恢复

### 用户体验
- [ ] 语言切换无需重新加载页面
- [ ] 所有功能在各语言下正常工作
- [ ] 错误消息正确本地化
- [ ] 复制内容包含本地化信息

### 技术稳定性
- [ ] 不支持的语言正确回退到英语
- [ ] 没有JavaScript错误或警告
- [ ] 国际化不影响插件性能
- [ ] 兼容不同浏览器语言设置

## 🐛 常见问题排查

### 问题1: 界面没有切换语言
**可能原因**:
- 国际化系统加载失败
- 缓存问题
- JavaScript错误

**排查步骤**:
1. 检查控制台是否有错误信息
2. 确认`i18n/locales.js`文件正确加载
3. 清除浏览器缓存重试

### 问题2: 部分文本没有翻译
**可能原因**:
- 缺少`data-i18n`属性
- 翻译键不存在
- 更新函数未调用

**排查步骤**:
1. 检查HTML元素是否有`data-i18n`属性
2. 验证翻译键在语言包中存在
3. 确认`updateLocalization()`被正确调用

### 问题3: 语言选择不保存
**可能原因**:
- localStorage权限问题
- 设置保存逻辑错误

**排查步骤**:
1. 检查浏览器控制台localStorage是否可用
2. 验证设置保存和加载逻辑
3. 检查网站权限设置

## 📊 测试报告模板

```markdown
# 国际化功能测试报告

**测试日期**: YYYY-MM-DD
**测试环境**: Chrome XXX / Edge XXX
**插件版本**: v1.0.0

## 测试结果总览
- ✅ 自动语言检测: 通过
- ✅ 手动语言切换: 通过  
- ✅ 语言持久化: 通过
- ✅ 线程复制国际化: 通过
- ❌ 错误消息国际化: 失败 - 部分日语显示异常
- ✅ 复制内容国际化: 通过
- ✅ 语言变更响应: 通过

## 发现的问题
1. 日语错误消息中存在文字编码问题
2. 韩语界面个别按钮宽度不够

## 建议改进
1. 检查日语字符编码
2. 调整按钮样式适应不同语言文本长度
```

---

通过这个全面的测试指南，可以确保插件的国际化功能为全球用户提供优秀的多语言体验！ 