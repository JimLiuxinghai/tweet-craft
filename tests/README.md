# Tweet Craft Extension - Test Suite

æœ¬ç›®å½•åŒ…å« Tweet Craft æµè§ˆå™¨æ‰©å±•çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µéƒ½å¾—åˆ°å……åˆ†æµ‹è¯•ã€‚

## ðŸ“ æ–‡ä»¶ç»“æž„

```
tests/
â”œâ”€â”€ README.md        # æµ‹è¯•æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ test-framework.ts# è½»é‡çº§æµ‹è¯•æ¡†æž¶
â”œâ”€â”€ core-functionality.test.ts # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ extension-specific.test.ts  # æ‰©å±•ç‰¹å®šåŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ run-tests.ts     # æµ‹è¯•æ‰§è¡Œå…¥å£
â””â”€â”€ test-runner.html # æµè§ˆå™¨æµ‹è¯•ç•Œé¢
```

## ðŸ§ª æµ‹è¯•æ¡†æž¶

### è‡ªå®šä¹‰è½»é‡çº§æ¡†æž¶
æˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰çš„è½»é‡çº§æµ‹è¯•æ¡†æž¶ï¼Œä¸“é—¨ä¸ºæµè§ˆå™¨æ‰©å±•çŽ¯å¢ƒä¼˜åŒ–ï¼š

- **Assert ç±»**: æä¾›å„ç§æ–­è¨€æ–¹æ³•
- **MockHelper ç±»**: æä¾›æ¨¡æ‹Ÿå·¥å…·
- **TestRunner ç±»**: ç®¡ç†æµ‹è¯•æ‰§è¡Œ
- **ä¾¿æ·å‡½æ•°**: `describe`, `it` ç­‰

### ä¸»è¦ç‰¹æ€§
- âœ… é›¶ä¾èµ–ï¼Œçº¯ TypeScript å®žçŽ°
- âœ… æ”¯æŒå¼‚æ­¥æµ‹è¯•
- âœ… å†…ç½®è¶…æ—¶å¤„ç†
- âœ… æ¨¡æ‹Ÿ DOM å’Œ API
- âœ… è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•

## ðŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• (62ä¸ªæµ‹è¯•ç”¨ä¾‹)

#### 1. å›½é™…åŒ–ç³»ç»Ÿ (7 tests)
- âœ… è¯­è¨€æ£€æµ‹
- âœ… ç¿»è¯‘åŠŸèƒ½
- âœ… å‚æ•°æ’å€¼
- âœ… è¯­è¨€åˆ‡æ¢
- âœ… é”™è¯¯å¤„ç†
- âœ… ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–
- âœ… åŒºåŸŸè®¾ç½®éªŒè¯

#### 2. é”™è¯¯å¤„ç†ç³»ç»Ÿ (6 tests)
- âœ… ExtensionError åˆ›å»º
- âœ… æ ‡å‡†é”™è¯¯è§„èŒƒåŒ–
- âœ… é”™è¯¯åˆ†ç±»
- âœ… ç»Ÿè®¡è¿½è¸ª
- âœ… å†·å´æœºåˆ¶
- âœ… æ¢å¤ç­–ç•¥

#### 3. ç¼“å­˜ç®¡ç†ç³»ç»Ÿ (5 tests)
- âœ… æ•°æ®å­˜å‚¨/æ£€ç´¢
- âœ… TTL è¿‡æœŸå¤„ç†
- âœ… ç¼“å­˜å¤§å°é™åˆ¶
- âœ… ç¼“å­˜æ¸…ç†
- âœ… é”®éªŒè¯

#### 4. å†…å­˜ç®¡ç†ç³»ç»Ÿ (4 tests)
- âœ… å†…å­˜ä½¿ç”¨ç›‘æŽ§
- âœ… å†…å­˜åŽ‹åŠ›æ£€æµ‹
- âœ… è‡ªåŠ¨æ¸…ç†è§¦å‘
- âœ… ç»Ÿè®¡ä¿¡æ¯

#### 5. æ‰¹é‡å¤„ç†ç³»ç»Ÿ (5 tests)
- âœ… æ‰¹å¤„ç†æ‰§è¡Œ
- âœ… é”™è¯¯å¤„ç†
- âœ… å¹¶å‘æŽ§åˆ¶
- âœ… è¿›åº¦å›žè°ƒ
- âœ… ç»Ÿè®¡ä¿¡æ¯

### æ‰©å±•ç‰¹å®šåŠŸèƒ½æµ‹è¯•

#### 6. Twitter å†…å®¹è§£æž (6 tests)
- âœ… æŽ¨æ–‡å…ƒç´ è¯†åˆ«
- âœ… æ–‡æœ¬å†…å®¹æå–
- âœ… ä½œè€…ä¿¡æ¯æå–
- âœ… äº¤äº’æ•°æ®æå–
- âœ… åª’ä½“å†…å®¹å¤„ç†
- âœ… çº¿ç¨‹è¯†åˆ«

#### 7. å†…å®¹æ ¼å¼åŒ– (5 tests)
- âœ… çº¯æ–‡æœ¬æ ¼å¼åŒ–
- âœ… Markdown æ ¼å¼åŒ–
- âœ… HTML æ ¼å¼åŒ–
- âœ… ç‰¹æ®Šå­—ç¬¦å¤„ç†
- âœ… ç©ºå†…å®¹å¤„ç†

#### 8. å‰ªè´´æ¿æ“ä½œ (4 tests)
- âœ… API å¯ç”¨æ€§æ£€æµ‹
- âœ… æƒé™çŠ¶æ€å¤„ç†
- âœ… execCommand é™çº§
- âœ… é”™è¯¯å¤„ç†

#### 9. æˆªå›¾åŠŸèƒ½ (4 tests)
- âœ… Canvas æ”¯æŒæ£€æµ‹
- âœ… é…ç½®é€‰é¡¹å¤„ç†
- âœ… å°ºå¯¸éªŒè¯
- âœ… é”™è¯¯å¤„ç†

#### 10. å­˜å‚¨å’Œè®¾ç½® (4 tests)
- âœ… åå¥½è®¾ç½®ä¿å­˜/åŠ è½½
- âœ… å­˜å‚¨é…é¢å¤„ç†
- âœ… è®¾ç½®å€¼éªŒè¯
- âœ… æ—§æ ¼å¼è¿ç§»

#### 11. æ€§èƒ½å’Œé™åˆ¶ (3 tests)
- âœ… å¤§å†…å®¹å¤„ç†
- âœ… å¹¶å‘é™åˆ¶
- âœ… æ“ä½œè¶…æ—¶

#### 12. DOM æ“ä½œ (3 tests)
- âœ… æ¨¡æ‹Ÿå…ƒç´ åˆ›å»º
- âœ… ç¼ºå¤±å…ƒç´ å¤„ç†
- âœ… å±žæ€§éªŒè¯

#### 13. è¾¹ç•Œæƒ…å†µå¤„ç† (6 tests)
- âœ… Null/Undefined è¾“å…¥
- âœ… è¶…å¤§æ•°æ®å¤„ç†
- âœ… å¿«é€Ÿè¿žç»­æ“ä½œ
- âœ… Unicode å’Œç‰¹æ®Šå­—ç¬¦
- âœ… å¾ªçŽ¯å¼•ç”¨å¤„ç†
- âœ… å¹¶å‘è®¿é—®

## ðŸš€ è¿è¡Œæµ‹è¯•

### æ–¹æ³•1: æµè§ˆå™¨çŽ¯å¢ƒ
```bash
# æ‰“å¼€æµ‹è¯•ç•Œé¢
open tests/test-runner.html
```

### æ–¹æ³•2: å‘½ä»¤è¡ŒçŽ¯å¢ƒ (å¦‚æžœæ”¯æŒ)
```bash
# ä½¿ç”¨ TypeScript ç›´æŽ¥è¿è¡Œ
npx ts-node tests/run-tests.ts

# æˆ–ç¼–è¯‘åŽè¿è¡Œ
tsc tests/run-tests.ts && node tests/run-tests.js
```

### æ–¹æ³•3: å¼€å‘è€…å·¥å…·
```javascript
// åœ¨æµè§ˆå™¨æŽ§åˆ¶å°ä¸­è¿è¡Œ
await runTests();
```

## ðŸ“‹ æµ‹è¯•ç±»åž‹

### å•å…ƒæµ‹è¯•
- æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç±»çš„åŠŸèƒ½
- éªŒè¯è¾“å…¥è¾“å‡ºçš„æ­£ç¡®æ€§
- è¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸æƒ…å†µ

### é›†æˆæµ‹è¯•
- æµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’
- éªŒè¯æ•°æ®æµå’ŒçŠ¶æ€ç®¡ç†
- ç¡®ä¿ç³»ç»Ÿåè°ƒå·¥ä½œ

### ç«¯åˆ°ç«¯æµ‹è¯•
- æ¨¡æ‹ŸçœŸå®žç”¨æˆ·åœºæ™¯
- æµ‹è¯•å®Œæ•´å·¥ä½œæµç¨‹
- éªŒè¯ç”¨æˆ·ä½“éªŒ

### æ€§èƒ½æµ‹è¯•
- æµ‹é‡æ“ä½œæ‰§è¡Œæ—¶é—´
- ç›‘æŽ§å†…å­˜ä½¿ç”¨æƒ…å†µ
- éªŒè¯å¹¶å‘å¤„ç†èƒ½åŠ›

### è¾¹ç•Œæµ‹è¯•
- æµ‹è¯•æžé™è¾“å…¥æƒ…å†µ
- éªŒè¯é”™è¯¯å¤„ç†æœºåˆ¶
- ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§

## ðŸ”§ æ¨¡æ‹Ÿå’Œå·¥å…·

### MockHelper å·¥å…·
- `mockFetch()`: æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
- `mockDOM()`: åˆ›å»ºæ¨¡æ‹Ÿ DOM çŽ¯å¢ƒ
- `createMockElement()`: åˆ›å»ºæ¨¡æ‹Ÿ DOM å…ƒç´ 
- `restoreFetch()`: æ¢å¤åŽŸå§‹ fetch

### Assert æ–­è¨€æ–¹æ³•
- `isTrue()` / `isFalse()`: å¸ƒå°”æ–­è¨€
- `equals()` / `deepEquals()`: ç›¸ç­‰æ€§æ–­è¨€
- `notNull()`: éžç©ºæ–­è¨€
- `throws()` / `throwsAsync()`: å¼‚å¸¸æ–­è¨€
- `arrayIncludes()` / `arrayLength()`: æ•°ç»„æ–­è¨€
- `stringContains()` / `matches()`: å­—ç¬¦ä¸²æ–­è¨€

## ðŸ“ˆ æµ‹è¯•æŠ¥å‘Š

### æŽ§åˆ¶å°è¾“å‡º
- âœ…/âŒ å®žæ—¶æµ‹è¯•çŠ¶æ€
- ðŸ“Š è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
- â±ï¸ æ‰§è¡Œæ—¶é—´æµ‹é‡
- ðŸ“‹ å¤±è´¥æµ‹è¯•è¯¦æƒ…

### JSON æŠ¥å‘Š (å¯é€‰)
```json
{
  "summary": {
    "total": 62,
    "passed": 58,
    "failed": 4,
    "successRate": "93.5%",
    "totalDuration": "2340.45ms"
  },
  "failedTests": [...],
  "categories": {...}
}
```

## ðŸ¥ ç³»ç»Ÿå¥åº·æ£€æŸ¥

è¿è¡Œæµ‹è¯•å‰ä¼šè‡ªåŠ¨æ‰§è¡Œå¥åº·æ£€æŸ¥ï¼š

- âœ… DOM API å¯ç”¨æ€§
- âœ… Local Storage æ”¯æŒ
- âœ… Clipboard API æ”¯æŒ
- âœ… Canvas æ¸²æŸ“æ”¯æŒ
- âœ… Fetch API æ”¯æŒ
- âœ… Promise æ”¯æŒ
- âœ… ES6 ç‰¹æ€§æ”¯æŒ

## ðŸŽ¯ æµ‹è¯•æœ€ä½³å®žè·µ

### 1. æµ‹è¯•å‘½å
- ä½¿ç”¨æè¿°æ€§åç§°
- è¯´æ˜Žé¢„æœŸè¡Œä¸º
- åŒ…å«æµ‹è¯•æ¡ä»¶

### 2. æ–­è¨€ç¼–å†™
- ä¸€ä¸ªæµ‹è¯•ä¸€ä¸ªæ–­è¨€ç„¦ç‚¹
- æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯
- ä½¿ç”¨åˆé€‚çš„æ–­è¨€æ–¹æ³•

### 3. æ¨¡æ‹Ÿæ•°æ®
- åˆ›å»ºçœŸå®žçš„æµ‹è¯•æ•°æ®
- è¦†ç›–å„ç§æ•°æ®ç±»åž‹
- åŒ…å«è¾¹ç•Œæƒ…å†µ

### 4. å¼‚æ­¥å¤„ç†
- æ­£ç¡®ä½¿ç”¨ async/await
- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
- å¤„ç† Promise æ‹’ç»

### 5. æ¸…ç†å·¥ä½œ
- æ¢å¤æ¨¡æ‹Ÿçš„ API
- æ¸…ç†æµ‹è¯•æ•°æ®
- é‡ç½®å…¨å±€çŠ¶æ€

## ðŸ” è°ƒè¯•æµ‹è¯•

### åœ¨æµè§ˆå™¨ä¸­è°ƒè¯•
1. æ‰“å¼€ `test-runner.html`
2. æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åœ¨æµ‹è¯•ä»£ç ä¸­è®¾ç½®æ–­ç‚¹
4. è¿è¡Œç‰¹å®šæµ‹è¯•

### å¸¸è§é—®é¢˜æŽ’æŸ¥
- **æµ‹è¯•è¶…æ—¶**: æ£€æŸ¥å¼‚æ­¥æ“ä½œ
- **æ–­è¨€å¤±è´¥**: éªŒè¯æœŸæœ›å€¼
- **æ¨¡æ‹Ÿä¸å·¥ä½œ**: ç¡®ä¿æ­£ç¡®è®¾ç½®å’Œæ¸…ç†
- **å†…å­˜æ³„æ¼**: æ£€æŸ¥äº‹ä»¶ç›‘å¬å™¨æ¸…ç†

## ðŸ“ æ·»åŠ æ–°æµ‹è¯•

### 1. åˆ›å»ºæµ‹è¯•å¥—ä»¶
```typescript
const newTests = describe('New Feature', () => [
  it('should do something', async () => {
    // æµ‹è¯•ä»£ç 
  })
]);
```

### 2. æ³¨å†Œæµ‹è¯•
```typescript
testRunner.addSuite(newTests);
```

### 3. æ›´æ–°æ–‡æ¡£
- åœ¨æœ¬ README ä¸­æ·»åŠ æµ‹è¯•æè¿°
- æ›´æ–°æµ‹è¯•è®¡æ•°
- è®°å½•æ–°çš„æµ‹è¯•ç±»åˆ«

## ðŸš¨ æŒç»­é›†æˆ

æµ‹è¯•å¯ä»¥é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Run Tests
  run: npx ts-node tests/run-tests.ts
- name: Generate Report
  run: cat test-report.json
```

## ðŸ“Š æµ‹è¯•æŒ‡æ ‡ç›®æ ‡

- **è¦†ç›–çŽ‡**: > 90%
- **æˆåŠŸçŽ‡**: > 95%
- **æ‰§è¡Œæ—¶é—´**: < 5ç§’
- **å†…å­˜ä½¿ç”¨**: < 50MB
- **é”™è¯¯çŽ‡**: < 5%

## ðŸ”„ å®šæœŸç»´æŠ¤

### æ¯æ¬¡å‘å¸ƒå‰
- âœ… è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- âœ… æ£€æŸ¥æˆåŠŸçŽ‡
- âœ… æ›´æ–°æµ‹è¯•ç”¨ä¾‹
- âœ… ä¿®å¤å¤±è´¥çš„æµ‹è¯•

### æ¯æœˆç»´æŠ¤
- ðŸ”„ å®¡æŸ¥æµ‹è¯•è¦†ç›–çŽ‡
- ðŸ”„ æ¸…ç†è¿‡æ—¶çš„æµ‹è¯•
- ðŸ”„ ä¼˜åŒ–æµ‹è¯•æ€§èƒ½
- ðŸ”„ æ›´æ–°æ¨¡æ‹Ÿæ•°æ®

---

**æœ€åŽæ›´æ–°**: 2024å¹´1æœˆ
**æµ‹è¯•å¥—ä»¶ç‰ˆæœ¬**: 1.0.0
**æ€»æµ‹è¯•æ•°é‡**: 62ä¸ªæµ‹è¯•ç”¨ä¾‹